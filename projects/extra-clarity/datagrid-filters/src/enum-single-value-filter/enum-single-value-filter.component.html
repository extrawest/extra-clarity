<div [style.width.px]="widthPx">
  <ng-container *ngIf="!configErrors.length; else wrongConfig">

    <ng-container *ngIf="!loading; else loadingOptions">
      <div class="filter-title" *ngIf="title">
        {{ title }}
      </div>

      <div class="filter-selected-value" *ngIf="showSelectedValue">
        Selected: {{ selectedValueLabel }}
      </div>

      <div class="filter-options" [style.max-height.px]="maxHeightPx">
        <clr-radio-container
          class="radio-container"
          [ngClass]="{ 'stretch-labels': stretchLabels }"
        >
          <clr-radio-wrapper *ngFor="let option of options; trackBy: trackByValue">
            <input
              type="radio"
              clrRadio
              [name]="propertyKey"
              [checked]="option.value === filterValue"
              (change)="onInputChange(option.value)"
            />
            <label>
              <ng-container
                [ngTemplateOutlet]="customLabelTpl || defaultLabelTpl"
                [ngTemplateOutletContext]="{ $implicit: option }"
              />
              <ng-template #defaultLabelTpl>
                {{ option.label ?? option.value }}
              </ng-template>
            </label>
          </clr-radio-wrapper>
        </clr-radio-container>
      </div>

      <div class="filter-buttons">
        <button
          type="button"
          class="btn btn-block btn-sm"
          (click)="unselectAll()"
          [disabled]="filterValue === null"
        >
          Show All
        </button>
        <button
          *ngIf="hasCustomDefaultState"
          type="button"
          class="btn btn-block btn-sm"
          (click)="resetToDefault()"
          [disabled]="isStateDefault"
        >
          Reset to Default
        </button>
      </div>
    </ng-container>
  </ng-container>
</div>

<ng-template #loadingOptions>
  <div class="await-loading">
    <div>
      Loading... <span class="spinner spinner-inline"></span>
    </div>
    <div>Please wait</div>
  </div>
</ng-template>

<ng-template #wrongConfig>
  <div class="config-errors">
    There are some issues with the component's inputs:
    <ul>
      <li *ngFor="let error of configErrors">{{ error }}</li>
    </ul>
  </div>
</ng-template>
