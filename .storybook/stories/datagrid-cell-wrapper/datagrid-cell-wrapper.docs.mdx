import { ArgTypes, Canvas, Markdown, Meta } from '@storybook/blocks';

import { docsStylePatch, extraClarityGithubSrc } from '../../helpers';

import * as WrapperStories from './datagrid-cell-wrapper.stories';

<style>
  { docsStylePatch }
</style>

<Meta
  of={WrapperStories}
  name="Overview"
/>

# Datagrid Cell Wrapper

<div className="table-of-contents">
  - [Quick Start](#quick-start)
  - [Example](#example)
  - [Stories](#stories)
  - [Description](#description)
    * [Configuration](#configuration)
  - [API](#api)
  - [Source Code](#source-code)
</div>

## Quick Start

> **Standalone component**: yes

```typescript
import { DatagridCellWrapperComponent } from '@extrawest/extra-clarity/datagrid-cell-wrapper';
```
```html
<ec-dg-cell-wrapper />
```
```html
<clr-datagrid>
  ...
  <clr-dg-cell>
    <ec-dg-cell-wrapper
      [truncate]="true"
      [withCopyBtn]="true"
      [btnInline]="true"
      [textToCopy]="wrappedContent"
    >
      {{ wrappedContent }}
    </ec-dg-cell-wrapper>
  </clr-dg-cell>
  ...
</clr-datagrid>
```

## Example

<Canvas of={WrapperStories.DocsExampleStory} />

## Stories

* [A wrapper within a datagrid](/story/components-datagrid-cell-wrapper--within-datagrid-story)

## Description

This component helps with two issues within a datagrid cell:
1. Handle overflowing content: either truncate with ellipsis, or break into a new line.
    You can see the default datagrid behavior for too-long non-breakable strings
    in the example above within the second column.
2. Optionally add a copy-to-clipboard button to allow fast copying of truncated content
    without changing the column size to select the entire string.

Although this component was designed for using within datagrids,
it also may be used within tables and standalone containers with limited width.

### Configuration

There are no required inputs.

The `[truncate]` input sets how to handle overflowing content.

The `[withCopyBtn]` input enables a copy-to-clipboard button.

The `[btnInline]` input sets the button's position when the cell content length is less than the cell width.

The `[textToCopy]` input sets a value to copy to the clipboard when the button is pressed.

When the `textToCopy` value is copied into the clipboard, the `(copied)` output emits an event,
which may be used for providing an external notification about successful copying.

There are multiple inputs prefixed with `btn` for adjusting the button's appearance, including dimensions, sizes,
a label, and the vertical offsets (which may be useful for vertical alignment in non-datagrid use cases).

Please refer to the [API](#api) section below for more details about the inputs and outputs of this component.

## API

<ArgTypes sort="requiredFirst" exclude={['cellContent']} />

## Source Code

<Markdown>
  {`See at [GitHub](${extraClarityGithubSrc}/datagrid-cell-wrapper/src)`}
</Markdown>
